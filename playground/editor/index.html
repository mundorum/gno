<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Playground Editor</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mundorum/collections/full.min.css">
  <script type="module">
    import { EditorPg } from './editor-pg.js'
    window.editorPg = EditorPg.i
  </script>
</head>
<body onload="editorPg.start()">
  <oid-sphere assets="../assets/" stydefault="https://cdn.jsdelivr.net/npm/@mundorum/collections/full.min.css" global></oid-sphere>
  <div style="width:100%;height:100vh;display:flex;flex-direction:column">
    <div style="width:100%">
    <h2>
      <oid-sphere id="control" stylesheets="https://cdn.jsdelivr.net/npm/@mundorum/collections/" 
                  style="display:flex; align-items:center; gap:20px;">
        Playground Editor
        <file-oid label="Composition" publish="loaded~file/loaded" style="width:200px"></file-oid>
        <button-oid label="Translate" publish="click~control/translate"></button-oid>
        JSON
        <switch-oid publish="click~control/auto-translate" subscribe="control/auto-translate~switch/state"> 
        </switch-oid>
        HTML
      </oid-sphere>
    </h2>
    </div>
    
    <div style="height:100%">
    <split-pane-oid>
      <div style="width:100%;height:100%" slot="side-a">
        <split-pane-oid split="vertical">
          <div id="pg-final" slot="side-a"
               style="width:100%;height:100%;padding:5px;border-style:solid;border-width:1px">
          </div>
          <form slot="side-b" style="width:100%;height:100%">
            <textarea id="pg-editor" class="code"
                      style="width:100%;height:100%"></textarea>
            <submit-oid subscribe="form/submit~submit" publish="dispatch~control/compile"></submit-oid>
          </form>
        </split-pane-oid>
      </div>
      <div style="width:100%;height:100%" slot="side-b">
        <split-pane-oid split="vertical" proportion="75%">
          <!-- <div id="pg-render" slot="side-a"
               style="width:100%;height:100%;padding:5px;border-style:solid;border-width:1px">
          </div> -->
          <textarea id="pg-render" slot="side-a" class="code"
                    style="width:100%;height:100%"></textarea>
          <div id="pg-bus" style="width:100%;height:100%" slot="side-b">
            <oid-sphere id="control">
              <console-oid class="code" prompt="" subscribe="control/monitor~display">
              </console-oid>
            </oid-sphere>
          </div>
        </split-pane-oid>
      </div>
    </split-pane-oid>
  </div>
  </div>
</body>
</html>